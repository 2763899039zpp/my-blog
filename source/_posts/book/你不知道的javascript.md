---
title: 你不知道的javascript
date: 2023-03-09 16:42:40
tags: [js, book]
categories: book
---
# 第一章 作用域是什么
## 编译原理
- 分词/词法分析 （Tokenizing/Lexing）
将代码字符串分解成有意义的代码块，这些代码块称为**词法单元**（token）
- 解析/语法分析 （Parsing）
这个过程是将**词法单元流**转化成一个由元素逐级嵌套所组成的代表了程序语法结构的树。这个树被称为“抽象语法树”（Abstract Syntax Tree，**AST**）
- 代码生成
将 AST 转换为可执行代码的过程称被称为代码生成
## 理解作用域
- 引擎
负责整个javascript程序的编译及执行
- 编译器
负责语法缝隙及代码生成
- 作用域
确定当前执行的代码对这些标识符的访问权限

变量的赋值操作会执行两个动作，首先编译器会在当前作用域中声明一个变量（如
果之前没有声明过），然后在运行时引擎会在作用域中查找该变量，如果能够找到就会对
它赋值。

RHS:  谁是赋值操作的源头 retrieve his source value（取到它的源值）
LHS:  赋值操作的目标是谁
## 作用域嵌套
引擎从当前的执行作用域开始查找变量，如果找不到，
就向上一级继续查找。当抵达最外层的全局作用域时，无论找到还是没找到，查找过程都
会停止
## 异常
- ReferenceError
执行LHS查询时 在作用域寻找不到变量 引擎就会抛出该错误
- TypeError
对一个非函数类型的值进行函数调用
引用null或undefined类型的值中的属性
```
var a = 2;
a(); // TypeError

var b
b.length; // TypeError
```

- 小测验
```
function foo(a){
  var b = a;
  return a + b;
}
var c = foo(2)
```
1. 找出所有的 LHS 查询（这里有 3 处！）
c = ..; 、 a = 2 （隐式变量分配）、 b = ..

2. 找出所有的 RHS 查询（这里有 4 处！）
foo(2.. 、 = a; 、 a .. 、 .. b